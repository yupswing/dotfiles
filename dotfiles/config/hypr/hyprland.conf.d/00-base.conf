################################################################################
### Hyprland config - "snappy & usable"
### Obiettivo: animazioni rapide, blur leggero su layer/floating, tiling pulito,
###            swipe tra workspace. Niente effetti pacchiani.
### Docs generali: https://wiki.hyprland.org/Configuring/
################################################################################


################
### MONITORS ###
################
# Doc: https://wiki.hyprland.org/Configuring/Monitors/
# Esempi:
# monitor=,preferred,auto,auto
monitor=HDMI-A-1, 1920x1080@60, 0x0, 1
monitor=eDP-1, 1920x1080@60, 1920x0, 1
# monitor = HDMI-A-1,2560x1440@143.93,0x0,1
# monitor = eDP-1,1920x1080@60.20,2560x360,1

# Gruppo "front" sul monitor esterno (HDMI-A-1)
workspace = name:!0:float, monitor:HDMI-A-1
workspace = name:!1:im, monitor:HDMI-A-1
workspace = name:01:web, monitor:HDMI-A-1
workspace = name:02:code, monitor:HDMI-A-1
workspace = name:05, monitor:HDMI-A-1
workspace = name:07, monitor:HDMI-A-1
workspace = name:09, monitor:HDMI-A-1

# Gruppo "left" sul portatile (eDP-1)
workspace = name:!2:mail, monitor:eDP-1
workspace = name:!3:music, monitor:eDP-1
workspace = name:03:term, monitor:eDP-1
workspace = name:04, monitor:eDP-1
workspace = name:06, monitor:eDP-1
workspace = name:08, monitor:eDP-1
workspace = name:10, monitor:eDP-1

# Evita blur su app XWayland ridimensionate (testo più nitido):
xwayland {
  # Doc: https://wiki.hyprland.org/Configuring/X11-Applications/
  force_zero_scaling = true
}


###################
### MY PROGRAMS ###
###################
# Doc: https://wiki.hyprland.org/Configuring/Keywords/
$terminal = kitty
$fileManager = nemo
$menu = wofi --show drun


#############################
### ENVIRONMENT VARIABLES ###
#############################
# Doc: https://wiki.hyprland.org/Configuring/Environment-variables/
env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24

# Forza Electron/Chromium/VS Code su Wayland (Ozone)
env = ELECTRON_ENABLE_WAYLAND,1
env = ELECTRON_OZONE_PLATFORM_HINT,auto
env = OZONE_PLATFORM_HINT,auto
env = GTK_USE_PORTAL,1

# Alcune cose per app specifiche
env = KITTY_ENABLE_WAYLAND,1

# #TAG_LINUX_THEME
# GTK: forza tema Mojave-Dark (oltre ai settings.ini)
env = GTK_THEME, Mojave-Dark
env = GTK_APPLICATION_PREFER_DARK_THEME, 1
# Qt (se usi app Qt)
env = QT_QPA_PLATFORM, wayland;xcb
env = QT_QPA_PLATFORMTHEME, qt5ct


#####################
### LOOK AND FEEL ###
#####################
# Variabili generali: https://wiki.hyprland.org/Configuring/Variables/#general
general {
  gaps_in = 2 # spazio tra finestre
  gaps_out = 4 # spazio tra finestre e bordi
  border_size = 1

  # Bordi: attivo con gradiente, inattivo tenue
  col.active_border = rgba(33ccffee) rgba(00ff99ee) 45deg
  col.inactive_border = rgba(4a4a4abb)

  resize_on_border = false
  allow_tearing = false

  layout = dwindle # tiling dinamico
}

# Decorazioni: rounding, shadow, blur
# Doc: https://wiki.hyprland.org/Configuring/Variables/#decoration
decoration {
  rounding = 9 # angoli arrotondati
  rounding_power = 2

  # Opacità piena per tiled → leggibilità massima
  active_opacity = 1.0
  inactive_opacity = 1.0

  shadow {
    enabled = true
    range = 10 # ombra più morbida
    render_power = 3
    color = rgba(00000066)
  }

  # Blur: leggero e solo dove serve (layer/floating semitrasp.)
  # Doc: https://wiki.hyprland.org/Configuring/Variables/#blur
  blur {
    enabled = true
    size = 5
    passes = 3
    new_optimizations = true # performance migliori
    ignore_opacity = false
    vibrancy = 0.12
  }
}

# Animazioni: rapide, curve moderne, niente lag
# Doc: https://wiki.hyprland.org/Configuring/Animations/
animations {
  enabled = true

  # Curve
  bezier = easeOut,0.2,0.9,0.2,1
  bezier = easeInOut,0.4,0,0.2,1
  bezier = linear,0,0,1,1
  bezier = quick,0.15,0,0.1,1

  # Global speed scalar (1 = normale). Usa 1–6 come "damping".
  animation = global, 1, 6, default

  # Finestre (tiling + floating)
  animation = windows, 1, 5.2, easeOut, popin 82%
  animation = windowsIn, 1, 5.0, easeOut, popin 82%
  animation = windowsOut, 1, 3.0, linear, popin 82%

  # Layer (waybar/wofi/notifiche)
  animation = layers, 1, 4.0, easeOut, fade
  animation = layersIn, 1, 4.0, easeOut, fade
  animation = layersOut, 1, 2.0, linear, fade

  # Fade generici
  animation = fadeIn, 1, 2.2, easeInOut
  animation = fadeOut, 1, 2.0, easeInOut
  animation = fade, 1, 2.4, quick

  # Workspace: swipe + transizione visiva
  # "slide" richiede Hyprland recente; in caso di problemi, togli "slide".
  animation = workspaces, 1, 2.4, easeInOut, slide
  animation = workspacesIn, 1, 2.0, easeInOut, fade
  animation = workspacesOut, 1, 2.0, easeInOut, fade
}

# Dwindle layout tuning
# Doc: https://wiki.hyprland.org/Configuring/Dwindle-Layout/
dwindle {
  pseudotile = true # massimizza una finestra senza togliere il tiling
  preserve_split = true # mantieni lo split quando muovi finestre
  smart_split = true
  smart_resizing = true
}

# Master layout (se vuoi provarlo: mod+M per toggle di solito)
# Doc: https://wiki.hyprland.org/Configuring/Master-Layout/
master {
  new_status = master
}

# Varie
# Doc: https://wiki.hyprland.org/Configuring/Variables/#misc
misc {
  force_default_wallpaper = -1 # -1 = lascia com'è, 0/1 = disabilita wallpaper mascotte
  disable_hyprland_logo = true
}


#############
### INPUT  ###
#############
# Doc: https://wiki.hyprland.org/Configuring/Variables/#input
input {
  kb_layout = us
  kb_variant =
  kb_model =
  kb_options =
  kb_rules =

  follow_mouse = 1

  sensitivity = 0 # -1.0..1.0

  touchpad {
    natural_scroll = true
  }
}

#################
### GESTURES  ###
#################
# Swipe tra workspace (trackpad)
# Doc: https://wiki.hyprland.org/Configuring/Variables/#gestures
gestures {
  workspace_swipe = true
  workspace_swipe_fingers = 3 # 3 dita consigliato
  workspace_swipe_distance = 220 # aumenta se lo senti troppo sensibile
  workspace_swipe_invert = false
}

# Esempio per-device (lascia commentato o adatta)
# Doc: https://wiki.hyprland.org/Configuring/Keywords/#per-device-input-configs
# device {
#     name = epic-mouse-v1
#     sensitivity = -0.5
# }

##############################
### WINDOWS AND WORKSPACES ###
##############################
# Regole finestre / workspace
# Doc: https://wiki.hyprland.org/Configuring/Window-Rules/
#      https://wiki.hyprland.org/Configuring/Workspace-Rules/
# Ignora richieste di maximize da app (meglio col tiling):
windowrulev2 = suppressevent maximize, class:.*

# Fix trascinamenti strani con alcune app XWayland "vuote":
windowrulev2 = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

# Opacità leggera SOLO per floating (dialog, picker, ecc.):
# (Tiling resta opaco al 100% per leggibilità.)
windowrulev2 = opacity 0.96 0.92, floating:1

# Niente blur su terminali per testo più nitido:
windowrulev2 = noblur, class:^(kitty)$

# Se vuoi escludere altre app di testo dal blur, aggiungi altre righe:
# windowrulev2 = noblur, class:^(Alacritty|Code)$

# Smart gaps / no gaps when only (esempi):
# Doc: https://wiki.hyprland.org/Configuring/Workspace-Rules/
# workspace = w[tv1], gapsout:0, gapsin:0
# workspace = f[1], gapsout:0, gapsin:0
# windowrulev2 = bordersize 0, floating:0, onworkspace:w[tv1]
# windowrulev2 = rounding 0, floating:0, onworkspace:w[tv1]
# windowrulev2 = bordersize 0, floating:0, onworkspace:f[1]
# windowrulev2 = rounding 0, floating:0, onworkspace:f[1]
#############
### MENÙ  ###
#############
# Wofi (launcher) → background semitrasparente per sfruttare il blur.
# Tema wofi: crea ~/.config/wofi/style.css
# Esempio minimo (copiaincolla nel tuo CSS):
# window {
#   opacity: 0.95;
#   background-color: rgba(25,25,28,0.4);
#   border-radius: 12px;
# }
# body { font-size: 12pt; }
# Waybar → abilita background semi-trasparente nel CSS per blur:
# ~/.config/waybar/style.css (esempio):
# window#waybar {
#   background:
